<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #map {
            height: 800px;
            width: 100%;
        }
    </style>
</head>
<body>
<div id="map">Here be map</div>
<script>
    var map;
    var markers = new Array();
    var geocoder

    function findPostalCode(latLng) {
        console.log('find postal code for position')
        $.get(
            'http://api.geonames.org/findNearbyPostalCodesJSON',
            {
                username: 'gorgx0',
                radius: '0.2',
                maxRows: 20,
                lat: latLng.lat(),
                lng: latLng.lng()
            },
            function (data,status,jqXHRobj) {
                console.log('--- geoname results ---');
                console.log(data);
                data.postalCodes.forEach(function (postalCodeItem) {
                    console.log(postalCodeItem.postalCode)
                })
                console.log(status);
                console.log(jqXHRobj);
            }
        );
            // http://api.geonames.org/findNearbyPostalCodesJSON?username=gorgx0&lat=52.2304&lng=21.0116&radius=0.1
    }

    function initMap() {
        geocoder = new google.maps.Geocoder ;
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 52.2304, lng: 21.0116},
            zoom: 13,
            draggableCursor: 'pointer'
        });
        map.addListener('click', function (e) {
            console.log('lat: '+e.latLng.lat()+' lng:'+e.latLng.lng());
            var marker = new google.maps.Marker({
                position: e.latLng,
                map: map,
                title: 'a Marker'
            });
            markers.push(marker)
            findPostalCode(e.latLng)
        })
    }
</script>

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACNmxE04ekYyCQ49q7Rgo-_z1Lu-1oQJA&callback=initMap"></script>
</body>

</html>